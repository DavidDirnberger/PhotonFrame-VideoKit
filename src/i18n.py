#!/usr/bin/env python3
# i18n.py

from typing import Iterator, Mapping, Optional, cast

_current_lang: str = "en"  # oder was immer dein Default ist

MESSAGES = {
    "en": {
        # Main menu – names
        "cmd_convert": "Convert",
        "converting_method": "Converting",
        "cmd_compress": "Compress",
        "compressing_method": "Compressing",
        "cmd_trim": "Trim",
        "trimming_method": "Trimming",
        "cmd_scale": "Scale",
        "scaling_method": "Scaling",
        "scale_method": "Scaling",  # compatibility
        "cmd_crop_pad": "Crop / Pad",
        "cropping_method": "Cropping / Padding",
        "cmd_interpolate": "Interpolate",
        "interpolate_method": "Interpolating",
        "cmd_screencast": "Screencast",
        "screencast_method": "Screencasting",
        "cmd_record": "External Record",
        "record_method": "External Recording",
        "cmd_merge": "Merge",
        "merge_method": "Merging",
        "cmd_extract": "Extract",
        "extract_method": "Extracting",
        "cmd_enhance": "Enhance",
        "enhancing_method": "Enhancing",
        "cmd_ai_enhance": "AI-Enhance",
        "ai_enhance_method": "AI-Enhancing",
        "cmd_gif": "GIF",
        "gif_method": "GIF creation",
        "cmd_metadata": "Metadata",
        "metadata_method": "Editing Metadata",
        "cmd_images_to_video": "Images to Video",
        "images_to_video_method": "Images to Video Converting",
        # Descriptions
        "desc_convert": "Convert videos; choose container, codec, resolution, frame rate or presets while keeping audio/subtitle streams, chapters and thumbnails where possible.",
        "desc_compress": "Compress videos on a simple 0–100 quality scale; usually keeps container/codec and preserves covers/thumbnails with sensible audio handling.",
        "desc_trim": "Cut segments via start+duration or start+end; pick fast GOP copy (lossless) or precise re-encode with a quality preset.",
        "desc_scale": "Scale videos to a target resolution with aspect-ratio preservation and automatic encoder alignment; keeps thumbnails and metadata where allowed.",
        "desc_crop_pad": "Crop or pad per axis to a target resolution with optional offsets; thumbnails survive and alpha sources get transparent padding.",
        "desc_interpolate": "Raise or normalize frame rate via motion interpolation; target via factor or explicit FPS, preserving audio/subtitles and alpha when supported.",
        "desc_screencast": "Start screen recording",
        "desc_record": "Record an external video via USB",
        "desc_merge": "Combine videos with extra clips, audio tracks or subtitles; control unification, offsets and extension while preserving streams, chapters and the first thumbnail.",
        "desc_extract": "Extract audio tracks, subtitles, still frames or video-only variants.",
        "desc_enhance": "Apply stabilization, denoise and color/brightness tweaks via presets or custom values; container/codec handling is automatic.",
        "desc_ai_enhance": "Upscale and denoise with Real-ESRGAN/RealCUGAN; control model, scale, denoise, face enhance, TTA and priority while remuxing streams back.",
        "desc_gif": "Create GIFs from short videos with optional meme text; auto limits resolution/FPS for size, or keep the original quality on request.",
        "desc_images_to_video": "Turn image sequences into a video with natural sorting; flexible timing via FPS/per-image or total duration plus format/codec/preset choices, keeping alpha when supported.",
        "desc_metadata": "Read and edit container/stream metadata; show technical info, group protected/editable tags, and manage tags and embedded thumbnails.",
        # Other UI strings
        "package_description": "Tool for processing & enhancing videos",
        "select_action_prompt": "     Select an action:",
        "invalid_selection": "Invalid selection. Exiting.",
        "yes": "Yes",
        "no": "No",
        "back": "Back",
        "accept": "Accept",
        "reject": "Reject",
        "files": "Files",
        "filename": "Filename",
        "help": "Help",
        "help_show_help": "Show this help message and exit",
        "cli_description": "Video Manager command-line interface",
        "help_input_files": "Input files (empty triggers interactive mode)",
        "help_input_files_images": "Input images or folders (natural sorting applied); empty triggers interactive mode",
        "help_output_path": "Output path/file (optional)",
        "help_format": "Target container/format",
        "help_codec": "Video codec (or copy passthrough)",
        "help_preset": "Encoding preset / profile",
        "help_resolution": "Target resolution (e.g. 1920x1080 or fixed:WxH)",
        "help_framerate": "Target frame rate (e.g. 60 or 30000/1001)",
        "help_quality_percent": "Quality in percent (0–100)",
        "help_quality_preset": "Quality preset for precise trim re-encode",
        "help_trim_start": "Segment start (HH:MM:SS, MM:SS or seconds)",
        "help_trim_duration": "Segment duration",
        "help_trim_end": "Segment end time",
        "help_trim_precise": "Use precise re-encode (slower, frame-accurate)",
        "help_scale": "Scale video to a target resolution",
        "help_preserve_ar": "Preserve aspect ratio when scaling",
        "help_croppad": "Crop or pad to a target resolution with offsets",
        "help_offset": "Offset for crop/pad (X:Y)",
        "help_offset_x": "Horizontal offset",
        "help_offset_y": "Vertical offset",
        "help_interpolate": "Increase/normalize FPS via motion interpolation",
        "help_factor_or_fps": "Factor like 2x or absolute FPS (e.g. 60, 30000/1001)",
        "help_interpolate_quality": "Interpolation quality preset",
        "help_convert": "Convert videos; choose format, codec, resolution, FPS or preset",
        "help_compress": "Compress videos using a 0–100 quality setting",
        "help_trim": "Cut videos by start/duration or start/end",
        "help_scale_cmd": "Scale videos to a target resolution",
        "help_merge": "Merge media (videos/audio/subtitles) with offsets and presets",
        "help_extract": "Extract audio, subtitles, frames or video-only",
        "help_enhance": "Apply stabilization, denoise and color/brightness tweaks",
        "help_enhance_preset": "Preset for enhancement parameters",
        "help_enhance_stabilize": "Enable stabilization",
        "help_enhance_stab_method": "Stabilization method",
        "help_enhance_stab_smooth": "Stabilization smoothing strength",
        "help_enhance_stab_rx": "Horizontal deshake strength",
        "help_enhance_stab_ry": "Vertical deshake strength",
        "help_enhance_denoise": "Enable noise reduction",
        "help_enhance_denoise_method": "Noise reduction filter",
        "help_enhance_denoise_intensity": "Noise reduction intensity (0–100)",
        "help_enhance_warmth": "Warmth (0–100)",
        "help_enhance_tint": "Tint (0–100)",
        "help_enhance_brightness": "Brightness (0–100)",
        "help_enhance_contrast": "Contrast (0–100)",
        "help_enhance_saturation": "Saturation (0–100)",
        "help_img2vid": "Create video from image sequences with timing options",
        "help_framerate_or_duration": "Frame rate or per-image duration",
        "help_total_duration": "Total duration for the generated video",
        "help_img_scale": "Scale images to match target video resolution",
        "help_merge_target_res": "How to unify resolution (no-scale/smallest/average/largest/fixed)",
        "help_audio_offset": "Audio offset in seconds",
        "help_subtitle_offset": "Subtitle offset in seconds",
        "help_pause_between": "Pause inserted between clips",
        "help_burn_subtitle": "Burn subtitles into video",
        "help_subtitle_name": "Set track name for subtitles",
        "help_audio_name": "Set track name for audio",
        "help_extend_canvas": "Extend duration to fit longest input",
        "help_extract_frame": "Extract a single frame (optionally at given time)",
        "help_extract_audio": "Extract audio tracks",
        "help_extract_video": "Create video-only without audio/subtitles",
        "help_extract_subtitle": "Extract subtitles (optionally filtered by language/name)",
        "help_extract_format": "Target format for subtitles or frame image",
        "help_aienhance": "AI upscale/denoise with Real-ESRGAN/RealCUGAN",
        "help_ai_model": "AI model key to use",
        "help_ai_denoise": "Denoise strength (0.0–1.0)",
        "help_ai_noise_level": "Noise level (model-specific)",
        "help_ai_face_enhance": "Enable face enhancement",
        "help_ai_scale": "Upscale factor",
        "help_ai_tta": "Enable test-time augmentation",
        "help_ai_blend": "Blend upscale with original",
        "help_ai_blend_opacity": "Blend strength (0–1)",
        "help_ai_priority": "Process priority",
        "help_ai_force_overwrite": "Force overwrite existing output",
        "help_ai_chunk": "Chunk size (frames) for processing",
        "help_gif": "Create GIFs with optional meme text",
        "help_gif_text_top": "Upper meme text",
        "help_gif_text_bottom": "Lower meme text",
        "help_gif_font_size": "Font size for both texts",
        "help_gif_font_size_top": "Font size (top text)",
        "help_gif_font_size_bottom": "Font size (bottom text)",
        "help_gif_no_auto_open": "Do not auto-open generated GIF",
        "help_gif_keep_quality": "Keep original resolution/FPS where possible",
        "help_metadata": "Read/edit metadata; list, set or delete tags and thumbnails",
        "help_meta_list_tags": "List all metadata tags and exit",
        "help_meta_list_tags_json": "Output all metadata tags as JSON and exit",
        "help_meta_list_tagnames": "List available metadata tag names/keys",
        "help_meta_all": "List audio/subtitle/chapter info too",
        "help_meta_delete_thumbnail": "Delete embedded thumbnail",
        "help_meta_set_thumbnail": "Set embedded thumbnail from file or timestamp",
        "help_meta_show_thumbnail": "Show embedded thumbnail (if supported)",
        "help_meta_tag_generic": "Get or set a tag (KEY to read, KEY=VALUE to set). Repeatable.",
        "help_meta_read_or_set": "Read current '{tag}' (no value) or set it (pass a value).",
        "help_meta_list_tag": "Print tag '{tag}'",
        "help_meta_set_tag": "Set tag '{tag}'",
        "help_meta_delete_tag": "Delete tag '{tag}'",
        "new_preview": "New preview image",
        "skip": "Skip",
        "apply_settings": "Should the settings be applied?",
        "invalid_input": "Invalid input, please choose one of the options or enter 0 to exit!",
        "could_not_determine_fps": "Could not determine FPS for: {file}",
        "fps_change_summary": "FPS: {original} → {target}",
        "aborted_by_user": "Aborted by user",
        "settings_rejected": "Settings rejected",
        "choose_option": "Choose an option",
        "custom": "Custom",
        "invalid_ask_input": "Invalid input! Please select number 1-{option_num}, 0 to exit, or Enter for default.",
        "choose_quality_preset": "Choose a quality preset",
        "allowed_range": "Allowed range",
        "enter_float_value": "Please enter a rational number",
        "invalid_float_number": "Please enter a numeric value or a/b fraction (permitted: 12, 12.5, 12,5, 30000/1001)",
        "float_not_in_range": "Value out of range",
        "enter_2integer_numbers": "Enter two natural numbers",
        "start_time": "Start time",
        "end_time": "End time",
        "duration": "Duration",
        "precision": "Precision",
        "precise": "Precise and slow, quality-dependent",
        "fast-lossless": "Lossless and fast, but inaccurate",
        "quality": "Quality",
        "copy-lossless": "Copy (lossless)",
        "frame_not_created": "Frame not created!",
        "removed": "Removed",
        "preview_encode_error": "Preview image could not be created!",
        "processing_filters_creating_image": "Process filters and create preview images...",
        "enter_name": "Enter name",
        "no_parameters_changed": "No parameters changed.",
        "process_parameters": "Process-specific parameters",
        "cancel_hint": "Cancel with ESC • Ctrl+C",
        "canceled_info": "Canceled (ESC/Strg+C/Strg+K).",
        # Prefixes (used by helpers)
        "error_prefix": "ERROR:",
        "warning_prefix": "WARNING:",
        # Enhance
        "enhance_presets_list": "The following enhancement options are available",
        "warmth": "warmth",
        "tint": "tint",
        "brightness": "brightness",
        "contrast": "contrast",
        "saturation": "saturation",
        "apply_stabilization": "Apply stabilization?",
        "select_stabilization": "Select stabilization filter",
        "stabilization_explanation": "Reduces shaking and motion blur in video.",
        "vidstab_smooth_prompt": "Stabilization strength (Smooth, 0=low, 100=very strong) [{default}]: ",
        "deshake_rx_prompt": "Deshake rx (horizontal max shift, 0-100) [{default}]: ",
        "deshake_ry_prompt": "Deshake ry (vertical max shift, 0-100) [{default}]: ",
        "analyze_vidstab": "   Analyze #ifilename for vidstab stabilization...",
        "analyze_vidstab_done": "   Analysis of #ifilename for vidstab stabilization done!",
        "noise_reduction_method": "Denoising",
        "apply_noise_reduction": "Apply noise reduction?",
        "noise_explanation": "Reduces image noise, especially in low light conditions or old videos.",
        "select_denoising_filter": "Select denoising filter",
        "noise_intensity_promt": "Denoise intensity (0=off, 100=max) [{default}]: ",
        "color_correction_method": "Color-/Brightness correction",
        "apply_color_correction": "Apply color and brightness correction?",
        "color_correction_explanation": "Adjusts color balance, tint, brightness, and contrast.",
        "color_warmth_promt": "Warmth  (0=cool, 50=neutral, 100=warm) [{default}]: ",
        "color_tint_promt": "Tint    (0=magenta, 50=neutral, 100=green) [{default}]: ",
        "color_brightness_promt": "Brightness (0=dark, 50=neutral, 100=bright) [{default}]: ",
        "color_contrast_promt": "Contrast  (0=low, 50=neutral, 100=high) [{default}]: ",
        "color_saturation_promt": "Saturation (0=low, 50=neutral, 100=high) [{default}]: ",
        "no_color_correction": "All values are neutral; no color/brightness changes are applied.",
        "no_filter_no_video": "No filters activated, no new video will be created.",
        "enhancing_file_progress": "   Enhancing #ifilename with all modifications",
        "enhancing_file_done": "   Enhancing of #ofilename done!",
        "get_preview_time_input": "Specify preview times (in percent, e.g., '19,84') [{default}]: ",
        "read_percent_error": "Invalid input. Please enter a number between 0 and 100.",
        "frame_extract_error": "Could not extract preview frames.",
        "preview_disabled_no_inline": "Preview disabled (no inline images).",
        "preset_no_active_filter": "This preset does not have an active filter",
        "selected_parameters_header": "Selected parameters",
        "stabilize": "Apply stabilization",
        "stab_method": "Stabilization method",
        "stab_smooth": "Stabilization smoothing intensity",
        "stab_rx": "Deshake horizontal strength",
        "stab_ry": "Deshake vertical strength",
        "denoise": "Apply noise reduction",
        "denoise_method": "Denoising filter",
        "denoise_intensity": "Noise reduction intensity",
        "unsuitable_codec": "Codec {codec} unsuitable for {container} → use {sugg}",
        "no_encoder_for_codec": "No encoder for {codec} in {container}. Skip...",
        # AI – prompts, labels, progress
        "ai_choose_model": "Choose the AI model",
        "ai_model": "AI model",
        "ai_model_default_used": "AI model not specified — using default: {model}",
        "ai_model_interpreted_as": "Interpreting input as: {model}",
        "ai_model_unknown_choose": "Unknown model — please choose",
        "ai_denoise_strength_prompt": "Denoise strength (0.0–1.0) [{default}]: ",
        "ai_denoise_strength_label": "Denoise (0–1)",
        "ai_denoise_percent_prompt": "Denoise percentage (0–100) [{default}]: ",
        "ai_face_enhance_q": "Enable face enhancement?",
        "ai_face_enhance_label": "Face enhancement",
        "ai_worker_default_choose": "Process priority set to 'Auto'",
        "ai_worker_setting_not_found": "Priority setting not set to ‘auto’ 'min' ‘medium’ 'max'",
        "ai_chunk_size_label": "Chunk size (frames)",
        "ai_tmp_dir_using": "Using temporary directory: {dir}",
        "ai_tmp_selected": "Temporary directory selected.",
        "ai_not_enough_space": "Not enough free space (> {need} GB required), free: {free:.1f} GB — aborting.",
        "ai_framecount_failed": "Could not determine total frame count — skipping file.",
        "ai_extract_frames_progress": "Extracting frames …",
        "ai_extract_frames_done": "Frames extracted.",
        "ai_upscaling_progress": "Upscaling …",
        "ai_upscaling_done": "Upscaling finished.",
        "ai_segment_progress": "Creating segment …",
        "ai_segment_done": "Segment created.",
        "ai_chunk_extract_progress": "Chunk {idx}: extracting frames",
        "ai_chunk_extract_done": "Chunk {idx}: frames extracted",
        "ai_chunk_no_frames": "Chunk {idx}: no frames extracted!",
        "ai_chunk_upscale_progress": "Chunk {idx}: upscaling",
        "ai_chunk_upscale_done": "Chunk {idx}: upscaling finished",
        "ai_chunk_upscale_failed": "Chunk {idx}: upscaling failed",
        "ai_chunk_no_upscaled": "Chunk {idx}: no upscaled frame!",
        "ai_chunk_archive": "Chunk {idx}: archiving …",
        "ai_chunk_reencode_progress": "Chunk {idx}: re-encoding",
        "ai_chunk_reencode_done": "Chunk {idx}: segment created",
        "ai_chunk_encode_failed": "Chunk {idx}: FFmpeg encode failed!",
        "ai_concat_progress": "Final concatenation",
        "ai_concat_done": "Finished video '{video}' created",
        "ai_concat_failed": "Final concatenation failed.",
        "ai_segment_delete_fail": "Could not delete segment: {seg} — {err}",
        "ai_tmp_cleanup_ok": "Temporary directory {dir} removed.",
        "ai_tmp_cleanup_failed": "Temporary directory {dir} could not be fully removed.",
        "ai_tmp_cleanup_warn": "Temporary directory could not be fully cleaned; some files remain.",
        # Convert
        "choose_format": "Choose output format",
        "choose_codec": "Choose video codec for format {format}",
        "choose_resolution": "Choose target resolution",
        "want_framerate_cap": "Limit the frame rate? Current highest frame rate is {max_fps}.",
        "enter_framerate_cap": "Enter the frame rate limit",
        "enter_custom_resolution": "Enter custom resolution (e.g., 640:480)",
        "width_height_not_allowed": "Resolutions: Width > 0, Height ≠ 0; Height:\n -1 = automatic with aspect ratio, not necessarily even\n -2 = automatic with aspect ratio and rounded to even",
        "wrong_negative_height": "For negative height only:\n -1 = automatic with aspect ratio, not necessarily even\n -2 = automatic with aspect ratio and rounded to even\n are allowed.",
        "width_to_big": "Width {w_new}px is greater than original width {w_old}px",
        "height_to_big": "Height {h_new}px is greater than original height {h_old}px",
        "width_height_must_even": "Width and height must be even (4:2:0 encoder)",
        "converting_file_progress": "Conversion of #ifilename in progress",
        "converting_file_done": "Conversion completed and file #ofilename written",
        "bitstream_copy": "Bit-accurate copy, video is not re-encoded",
        "strict_copy": "Mathematically lossless, video is re-encoded",
        "analysing_lossless": "Analyzing lossless combination...",
        "prepare_encoder_maps_fallback_keep_failed": "prepare encoder maps fallback 'keep' failed: {error}",
        "alpha_alternative_suggestions": "Possible alpha-friendly alternatives: {list}",
        "invalid_framerate_arg": "Invalid framerate argument: {value} — using source FPS",
        "custom_resolution_validation_failed": "Custom resolution validation failed: {error}",
        # Compress
        "enter_quality_percent": "Quality (0 = max compression, 100 = best quality) [ENTER = {default}]",
        "maped_quality_crf": "Mapped quality {quality_percent} to CRF = {crf_value}",
        "invalid_quality_value": "Invalid --quality value. Use an integer between 0 and 100.",
        "compressing_file_progress": "Compressing file #ifilename in progress",
        "compressing_file_done": "Compression file #ofilename created",
        "compressing_file_finished": "Compressed file {file} created",
        "compress_codec_change": "The original codec '{ocodec}' was changed to a lossy codec => '{ncodec}'",
        "smart_keep_used": "Compression has no effect => smart copy",
        # Trim
        "trim_start_promt": "Trim start in format (HH:MM:SS, MM:SS, SS)",
        "trim_start_prompt": "Trim start in format (HH:MM:SS, MM:SS, SS)",  # compatibility
        "trim_len_or_end_prompt": "   Enter trim length or end time\n   Duration: '+1:00', 'd:1:00', 'dur:1:00', 'duration:1:00'\n   End time: '2:30', 'end:2:30', '@2:30'\n   '0' = Exit\n   Format (HH:MM:SS | MM:SS | SS):",
        "confirm_apply_trim": "Should the times be applied?",
        "invalid_start": "The start time is invalid ({val})!",
        "invalid_end": "The end time is invalid!",
        "end_must_be_gt_start": "End time ({end}) must be after start time ({start}).",
        "need_duration_or_end": "You must provide either a duration or an end time (e.g., '+1:00' or '2:30')",
        "invalid_duration": "Invalid duration. Use HH:MM:SS, MM:SS, or SS.",
        "duration_and_end_given_use_duration": "Both duration and end time are given, duration is used.",
        "duration_must_be_pos": "Duration must be greater than 0",
        "choose_trim_mode": "Choose the trimming method",
        "trim_mode_fast_desc": "Copy original video ⇒ lossless quality, very fast, but not very precise (keyframe-dependent, max. ±6s)",
        "trim_mode_precise_desc": "Re-encode video ⇒ depends on quality preset, very slow but very precise",
        "trim_copy_failed_fallback_reencode": "Direct stream copy during trimming failed.\nFalling back to re-encoding to produce a playable file;\nthis may take longer and may introduce minor quality changes.",
        "trimming_file_progress": "Trimming of file #ifilename in progress",
        "trimming_file_done": "Trimmed file #ofilename created",
        "trim_preview_skipped": "Trim preview skipped",
        # Extract
        "select_extract_type": "Select the type you want to extract",
        "no_audio_tracks": "No audio tracks in '{filename}'!",
        "select_subtitle_format": "Select subtitle format",
        "select_preferred_subtitle_languages": "Select preferred subtitle language(s)",
        "enter_languages_comma": "  Enter languages (comma-separated; codes or names,\n  e.g., de,en or German,English)",
        "lang_fallback_all": "No valid entries recognized – all languages will be considered!",
        "no_subtitle_tracks": "No subtitle tracks found in '{filename}'!",
        "subtitle_is_bitmap": "Subtitle track {trackname} is bitmap ({codec}); extracting original instead!",
        "select_frame_format": "Select frame format",
        "select_frame_time_preset": "Select a time at which the frame should be extracted",
        "enter_frame_time": "  Time for frame extraction in format (HH:MM:SS, MM:SS, SS)\n  or with % sign for percentage specification",
        "invalid_time_input": "Invalid input. Use format HH:MM:SS, MM:SS, SS or a number with %-sign",
        "no_duration_fallback": "Could not read duration; falling back to 1s",
        "extracting_audio_progress": "extracting audio from #ifilename in progress",
        "extracting_audio_done": "Audio extraction in #ofilename done",
        "extracting_subtitle_progress": "extracting subtitle from #ifilename in progress",
        "extracting_subtitle_done": "Subtitle extraction in #ofilename done",
        "extracting_frame_progress": "extracting frame from #ifilename in progress",
        "extracting_frame_done": "Frame extraction in #ofilename done",
        "extracting_videoonly_progress": "extracting video from #ifilename in progress",
        "extracting_videoonly_done": "Video extraction in #ofilename done",
        "no_audio_track": "No audio tracks in '{filename}'!",
        "invalid_image_format": "Invalid image format '{fmt}'!",
        "invalid_sub_format": "Invalid subtitle format '{fmt}'!",
        "unknown_format_entry": "Unknown --format entry:",
        # Metadata
        "edit_metadata_prompt": "Do you want to edit metadata?",
        "editable_tags_set": "Editable Tags (Set)",
        "editable_tags_unset": "Editable Tags (Unset)",
        "protected_metadata_tags": "Protected Metadata Tags",
        "editable_metadata_tags": "Editable Metadata Tags",
        "selected_tags_in_file": "Selected tags in {filename}",
        "set_thumbnail": "Set thumbnail",
        "delete_thumbnail": "Delete thumbnail",
        "exit_and_save": "Exit and save",
        "select_tag_number": "Select tag number to edit or delete:",
        "invalid_input_number": "Invalid input. Enter a number or '#'.",
        "cover_image_progress": "Preparing cover image",
        "cover_image_done": "Cover image prepared",
        "quit_no_changes": "Quit – no changes.",
        "enter_new_value_for": "Enter new value for '{name}' (empty = delete): ",
        "tag_deleted": "Tag '{key}' deleted.",
        "skip_protected_tag": "Skip protected tag '{key}'.",
        "select_thumbnail_source": "Select thumbnail source",
        "image_file": "External image file",
        "extract_frame": "Extract frame from video",
        "frame_extracted": "Thumbnail extracted from #ifilename.",
        "frame_extraction_failed": "Frame extraction failed!",
        "failed_to_prepare_cover": "Failed to prepare cover image!",
        "extracting_cover": "Extracting embedded cover...",
        "cover_extracted": "Cover extracted.",
        "thumbnail_exist": "Thumbnail exists",
        "thumbnail_exists": "Thumbnail exists",
        "thumbnail_not_set": "No Thumbnail set",
        "no_mp4_stream": "No existing MP4 cover streams to remove.",
        "cleaning_mp4_stream": "Cleaning previous MP4 cover streams …",
        "removing_cover": "Removing previous cover …",
        "cover_removed": "Previous cover removed",
        "mp4_cover_removed": "Old MP4 cover streams removed.",
        "could_not_remove_mp4_cover": "Could not remove old cover streams (keeping original).",
        "apply_thumbnail": "Do you want to apply thumbnail?",
        "embedding_thumbnail_progress": "Embedding thumbnail...",
        "embedding_thumbnail_done": "Thumbnail embedded",
        "embedding_failed": "Embedding failed (no output)!",
        "embedding_skipped": "Embedding skipped",
        "thumbnail_verification_failed_ffprobe": "Thumbnail verification failed. ffprobe summary:",
        "thumbnail_verification_failed_no_stream": "Thumbnail verification failed – no attached_pic stream found.",
        "thumbnail_verification_failed_no_attachment": "Thumbnail verification failed – attachment missing.",
        "cover_preparation_failed": "Cover preparation failed.",
        "no_image_selected_canceled": "No image file selected — canceled.",
        "no_image_selected_no_change": "No image file selected — nothing changed.",
        "embedding_failed_restore": "Embedding failed — restoring backup. Error: {error}",
        "thumbnail_verified": "Thumbnail verified",
        "thumbnail_removed": "Thumbnail removed",
        "no_thumbnail_found": "No embedded thumbnail found",
        "container_not_support_cover": "Container does not support embedded covers",
        "removing_cover_attachments": "Removing attached cover...",
        "removing_embedded_thumbnail": "Removing embedded thumbnail...",
        "no_video_stream": "Could not retrieve video stream info.",
        "ffmpeg_missing_install": "ffmpeg not found – install it first.",
        "no_metadata_found": "No metadata found",
        "side_car_poster": "Container not supported → create side-car poster",
        "side_car_poster_saved": "Side-car poster saved as {file}.",
        "failed_update_metadata": "Failed to update metadata!",
        "writing_metadata_progress": "Writing metadata in #ifilename in progress",
        "writing_metadata_done": "Metadata in #ofilename written",
        "metadata_sucessfully_updated": "Successfully updated metadata in {filename}",
        "metadata_not_fully_written": "Metadata could not be fully written to '{filename}': {missing}",
        "metadata_write_failed": "Could not write metadata to '{filename}': {error}",
        "color_primaries_label": "Primaries",
        "color_trc_label": "Transfer/TrC",
        "color_matrix_label": "Matrix",
        "color_range_label": "Range",
        "chapters_label": "Chapters",
        "chapter_fallback_title": "Chapter {index}",
        "chapters_more": "… +{count} more",
        "audio_codec_label": "Audio codec",
        "audio_bitrate_label": "Audio bitrate",
        "audio_channels_label": "Audio channels",
        "sample_rate_label": "Sample rate",
        "language_label": "Language",
        "thumbnail_label": "Thumbnail",
        "resolution_encoded_label": "Resolution (encoded)",
        "display_resolution_label": "Display resolution",
        "codec_label": "Codec",
        "fps_label": "FPS",
        "pixel_format_label": "Pixel format",
        "alpha_channel_label": "Alpha channel",
        "transparency_content_limited_label": "Transparency (content, up to 200 frames)",
        "transparency_content_label": "Transparency (content)",
        "audio_streams_label": "Audio streams",
        "subtitle_streams_label": "Subtitle streams",
        "virtual_readonly_header": "Virtual / Read-only",
        "video_info_header": "Video Info",
        "other_metadata_tags": "Other metadata tags",
        # GIF
        "gif_press_enter_to_skip_text": "Press ENTER to skip text.",
        "gif_text_prompt_top": "Meme text (top)",
        "gif_text_prompt_bottom": "Meme text (bottom)",
        "gif_choose_font_size": "Choose font size",
        "gif_choose_fs_top": "Choose font size (top)",
        "gif_choose_fs_bottom": "Choose font size (bottom)",
        "convert_to_gif_resolution": "Convert to a common GIF resolution and FPS (recommended)?",
        "gif_creating_progress": "Creating GIF from #ifilename",
        "gif_created_done": "GIF created: #ofilename",
        "gif_creation_finished": "GIF creation finished",
        # Crop/Pad
        "croppad_method": "crop-pad",
        "croppad_choose_resolution": "Choose target resolution",
        "croppad_enter_custom_info": "Enter a custom resolution as width×height (separators like x, :, /, -, ., , are accepted).",
        "croppad_prompt_custom_resolution": "Target resolution (e.g. 1920x1080)",
        "croppad_invalid_resolution": "Invalid resolution. Please enter width×height, e.g. 1920x1080.",
        "croppad_custom_requires_interactive": "The 'Custom' option is only available in interactive mode.",
        "croppad_prompt_offset_x": "X-offset from center (ENTER = 0):",
        "croppad_prompt_offset_y": "Y-offset from center (ENTER = 0):",
        "croppad_offset_invalid": "Offset is invalid — using 0.",
        "croppad_probe_failed": "Could not read video properties.",
        "croppad_skip_original": "Skipping '{filename}' (keeping original resolution).",
        "croppad_skip_same_res": "Skipping '{filename}' (already {w}x{h}).",
        "croppad_progress_cropping": "Cropping …",
        "croppad_progress_padding": "Padding …",
        "croppad_done_cropping": "Cropped:",
        "croppad_done_padding": "Padding done:",
        # Scale (general / selection / inputs)
        "enter_custom_resolution_explanation": "Accepts any separator (':', ',', '/', 'x', 'X', ';', '*', Space)",
        "scale_preserve_ar_prompt": "Preserve aspect ratio? ",
        "scale_preserve_ar_explanation": "(Yes = proportional scaling; No = stretch to exact target size)",
        "scale_custom_requires_interactive": "'custom' requires interactive mode.",
        "scale_invalid_resolution": "Invalid resolution.",
        "scale_probe_failed": "Failed to probe video geometry.",
        "scale_skip_original": "Skipping '{filename}' (keeping original resolution).",
        "scale_skip_same_res": "Skipping '{filename}' (already {w}x{h}).",
        "scaling_progress": "Scaling #ifilename to resolution → {width}×{height}",
        "scaling_done": "Scaled #ofilename to target resolution → {width}×{height}",
        "scaling_to": "Scaling to resolution",
        "even_align_fix": "Even-Align Fix for",
        "passed_no_resolution": "Passed no resolution",
        # Interpolate
        "enter_factor_or_fps": "Enter target FPS or framerate factor, indicated with an 'x' (e.g. 2x, 0.5x)",
        "invalid_framerate_input": "Invalid framerate input. Enter a framerate or a factor followed by 'x'!",
        "interpolation_in_progress": "Interpolating #ifilename from {oFPS} FPS to {nFPS} FPS",
        "interpolation_done": "Interpolated #ofilename to {FPS} FPS",
        "std_quality": "Balanced; direct interpolation without additional filters.",
        "hq_quality": "Mild pre-denoising before MV estimation for more stable motion vectors.",
        "max_quality": "Stronger pre-denoising plus gentle sharpening for the cleanest result.",
        # Images to Video
        "enter_fps_or_duration": "Enter the desired frame rate (X{fps,fp,f}), time per frame (X{h,m,s,ms,ns}), or total duration (HH:MM:SS MM:SS SS S) for the video.",
        "creating_video_progress": "Creating Video #ofilename from images",
        "creating_video_done": "Video #ofilename created from images",
        "croppad_or_scale": "Should deviating resolutions be cropped/filled or scaled?",
        "crop_or_pad_to_target": "Crops or pads images to target resolution",
        "scale_to_target": "Scales to target resolution",
        "smallest_resolution": "Using smallest occuring resolution",
        "average_resolution": "Using the average resolution",
        "largest_resolution": "Using largest resolution",
        "no_valid_frames_found": "No valid frames were found",
        "enforce_cfr_question": "Enforce a constant framerate?",
        "enforce_cfr_explanation": "You entered a total duration. If enabled, the output will use a fixed FPS (CFR). Otherwise, variable framerate (VFR) will be used.",
        "choose_cfr_fps": "FPS for constant framerate (e.g., 25):",
        "could_not_write_tempfile": "Could not write temporary list file: {error}",
        "no_file_passed": "No file(s) passed.",
        "duration_unparsable": "--duration could not be parsed: {value} ({error}); falling back to framerate.",
        "analysing_source_images": "Analysing source images ...",
        # --- video_record ---
        "v4l2_device_label": "{label} ({node})",
        "alsa_device_label": "ALSA {card_name} – {device_name} (plughw:{c},{d})",
        "pulse_device_label": "Pulse {desc} ({name})",
        "no_audio_option": "— (no audio)",
        "audio_none_dash": "—",
        "no_v4l2_devices": "No V4L2 devices found (is v4l2-ctl installed?).",
        "pick_video_device": "Select video device",
        "no_video_source_selected": "No video source selected.",
        "v4l2_busy_try_alt": "{curr} is busy/unavailable — using {alt}.",
        "v4l2_busy_unavailable": "Video device is busy or unavailable.",
        "pick_audio_source": "Select audio source",
        "no_audio_source_selected": "No audio source selected.",
        "alsa_busy_switch_to_pulse": "ALSA is busy — switching to Pulse {name}.",
        "audio_source_problem_no_audio": "Audio source busy/invalid — recording without audio.",
        "choose_preset": "Choose preset",
        "preset_desc_fallback": "Preset '{name}'",
        "choose_container_format": "Choose container/format",
        "choose_codec_for_format": "Choose codec for {format}",
        "set_fixed_duration_q": "Set a fixed duration?",
        "enter_duration_prompt": "Enter duration (HH:MM:SS or seconds)",
        "output_file_prompt": "Output file",
        "infinite_enter_stop": "∞ (ENTER to stop)",
        "recording_in_progress": "Recording …",
        "recording_done": "Recording finished: {filename}",
        "recording_started_enter_stop": "Recording started …   (ENTER = Stop)",
        "ffmpeg_not_clean_last_lines": "ffmpeg did not exit cleanly — last lines:",
        "no_output_file_produced": "No output file was produced.",
        "unknown_format_using_default": "Unknown format '{fmt}' — using {default}.",
        "codec_not_allowed_using_suggested": "Codec '{codec}' is not allowed for {container} — using suggested codec.",
        # Merge
        "selected_parameters": "Selected parameters",
        "container": "Container",
        "video_codec": "Video codec",
        "target_resolution": "Target resolution",
        "video_files": "Video files",
        "output_name": "Output name",
        "pause": "Pause",
        "select_second_file_to_merge": "Select the second file to merge",
        "choose_video_codec": "Choose video codec",
        "choose_target_resolution_strategy": "Choose target resolution strategy",
        "fit_mode_prompt": "How should clips fit the first video's resolution?",
        "pad_to_target": "Pad to target",
        "crop_to_target": "Crop to target",
        "enter_offset_for_audio": "Enter offset for audio track (e.g. 1.5s, -00:00:01.5)",
        "enter_offset_for_subtitle": "Enter offset for subtitle track (e.g. 1.5s, -00:00:01.5)",
        "offset_before_all_clips_optional": "Offset before all clips (optional)",
        "pause_between_clips": "Pause between clips",
        "subtitle_name_prompt": "Subtitle track title (optional)",
        "need_two_files": "Need two files.",
        "need_at_least_two_files": "Need at least two files for merge.",
        "no_video_files_found": "No video files found.",
        "no_prepared_files": "No prepared files",
        "preparing_clip": "Preparing clip …",
        "prepared_clip": "Clip prepared.",
        "creating_silent_clip": "Creating silent clip …",
        "created_output": "Created output #ofilename",
        "burning_subtitles": "Burning subtitles into #ifilename …",
        "merging_audio_into": "Merging audio into video …",
        "adding_subtitles": "Adding subtitles …",
        "concatenating_preprocessed_clips": "Concatenating preprocessed clips …",
        "merged_to_output": "Merged to output #ofilename complete",
        # Resolution strategy labels (used in menus)
        "match_first_resolution": "Match first video (fit)",
        "no_scale_pad_to_max": "No scale (pad to max)",
        "smallest": "Smallest",
        "average": "Average",
        "largest": "Largest",
        # labels for the parameter table
        "label_video_device": "Video device",
        "label_audio_source": "Audio source",
        "label_preset": "Preset",
        "label_container": "Container",
        "label_codec": "Codec",
        "label_encoder": "Encoder",
        "label_duration": "Duration",
        "label_output": "Output",
        # general file and other prompts
        "analysing_video": "Analysing video file",
        "analysing_video_done": "Video file analyzed!",
        "enter_time_or_percent": "Enter time or percent",
        "target": "Target",
        "file_size": "File size",
        "original_size": "Original size",
        "compressed_size": "Compressed size",
        "resolution": "Resolution",
        "offset": "Offset",
        "audio_offset": "Audio offset",
        "subtitle_offset": "Subtitle offset",
        "target_pix_fmt": "Target Pixel format",
        "not_set": "Not set",
        "enter_numbers_to_select_files": "Enter numbers to select files (e.g. 1,3,5-7,+),\n  press ENTER for all, or 0 to Exit:",
        "file_not_found": "File not found: {file}",
        "no_matching_file_found": "No matching file found!",
        "import_ok": "Video imported successfully",
        "passed_no_file": "Passed no filename!",
        "found_files": "Found Files",
        "selected_files": "Selected Files",
        "overwrite_file": "already exists, overwrite?",
        "change_filename": "Change filename",
        "new_filename": "Enter new filename",
        "overwrite_existing_file": "overwrite existing file",
        "warn_unknown_args": "Unknown argument(s): {args}",
        "starting": "started",
        "exit": "Exit",
        "exiting": "Exiting",
        "finished": "finished",
        "tmp_no_suitable_dir": "No temporary directory with enough free space found.",
        "persist_write_json_failed": "[persist] write_json failed: {error}",
        "no_files_match_pattern": "No files match pattern: {pattern}",
        # Presets / helpers
        "preset": "Preset",
        "invalid_preset": "Invalid preset",
        # ── NEW / AI-Enhance additions ───────────────────────────────────────
        "ai_no_valid_png_frames": "No valid PNG frames found",
        "ai_no_upscaled_abort_encode": "Upscaled frames not found — aborting encode.",
        "ai_ffconcat_write_failed": "Failed to write ffconcat list: {err}",
        "ai_ffmpeg_concat_diag_tail": "FFmpeg diagnostics (concat, last lines):",
        "ai_backends_missing": "Backends missing: neither {path} nor 'realesrgan-ncnn-vulkan' or 'realcugan-ncnn-vulkan' found.",
        "ai_outscale_prompt": "Upscale factor (Outscale)",
        "ai_tta_question": "Enable TTA? (slower, sometimes fewer artifacts)",
        "ai_blend_question": "Mix upscaled with original (blend)?",
        "ai_blend_opacity_prompt": "Blend strength (0.5–1.0, 1.0 = only upscale)",
        "ai_weight_missing": "Weight '{file}' not found — Real-ESRGAN (Python) may produce no output.\nPlease ensure: {dir}/weights/{file}",
        "ai_weight_ok": "Weight OK: {name}",
        "ai_realcugan_noise_prompt": "RealCUGAN: choose denoise/noise level",
        "ai_analysis_mode_no_overwrite": "Analysis mode active — not overwriting. Output: {name}",
        "ai_sequence_stats": "Sequence length: {n} | first: {first} | last: {last}",
        "ai_cancel_cleanup": "Cancelled — cleaning up…",
        "ai_blend_created": "Blend created: {name}",
        "ai_blend_failed_fallback": "Blend failed — outputting non-blended file.",
        "ai_tta_retry_disable": "TTA produced no output — retrying without TTA…",
        "ai_tta_retry_success": "Retry without TTA succeeded.",
        "ai_model_not_found": "The specified AI model {model} was not found!",
        "ai_feature_disabled": "AI features are disabled in config (ai.enabled=false). Enable them in config.ini or rerun install.sh.",
        "ai_feature_not_installed": "AI components are not installed. Rerun install.sh with AI features enabled.",
        "ncnn_exit_status": "ncnn-vulkan: exit={code}; duration={duration}; log={log}",
        "ncnn_timeout": "ncnn-vulkan: Timeout.",
        "ncnn_exception": "ncnn-vulkan: Exception: {error}",
        # --- Alpha/Format/Codec validation (copy/keep/original aware) ---
        "validate_container_disallows_codec": "Container '{container}' does not allow codec '{codec}'.",
        "validate_codec_not_defined_for_format": "Codec '{codec}' is not defined for format '{container}'. Allowed: {allowed}",
        "prevalidate_skipped_copy_keep": "Pre-validation skipped (copy/keep without known source codec); proceeding cautiously.",
        "alpha_loss_prefix": "Alpha loss: {reason}",
        "alpha_reason_container_no_alpha": "Container '{container}' does not support alpha.",
        "alpha_reason_codec_no_alpha": "Codec '{codec}' cannot carry an alpha channel.",
        "alpha_reason_encoder_no_pf": "Encoder '{encoder}' does not support an alpha-capable pixel format of the source ({pix_fmt}).",
    },
    "de": {
        # Hauptmenü – Namen
        "cmd_convert": "Konvertieren",
        "converting_method": "Konvertierung",
        "cmd_compress": "Komprimieren",
        "compressing_method": "Komprimierung",
        "cmd_trim": "Trimmen",
        "trimming_method": "Trimmen",
        "cmd_scale": "Skalieren",
        "scale_method": "Skalierung",  # kompatibel
        "scaling_method": "Skalierung",
        "cmd_crop_pad": "Beschneiden / Auffüllen",
        "cropping_method": "Beschneiden / Auffüllen",
        "cmd_interpolate": "Framerate erhöhen",
        "interpolate_method": "Interpolieren",
        "cmd_screencast": "Bildschirmaufnahme",
        "screencast_method": "Bildschirmaufnahme",
        "cmd_record": "Extern aufzeichnen",
        "record_method": "Externe Aufzeichnung",
        "cmd_merge": "Zusammenführen",
        "merge_method": "Zusammenführen",
        "cmd_extract": "Extrahieren",
        "extract_method": "Extrahieren",
        "cmd_enhance": "Verbessern",
        "enhancing_method": "Verbesserung",
        "cmd_ai_enhance": "KI-Verbessern",
        "ai_enhance_method": "KI-Verbesserung",
        "cmd_gif": "GIF erstellen",
        "gif_method": "GIF-Erstellung",
        "cmd_metadata": "Metadaten",
        "metadata_method": "Metadaten-Bearbeitung",
        "cmd_images_to_video": "Bilder zu Video",
        "images_to_video_method": "Bilder-zu-Video-Konvertierung",
        # Beschreibungen
        "desc_convert": "Konvertiert Videos; Container, Codec, Auflösung, Framerate oder Presets wählbar, Audio/Untertitel/Kapitel/Thumbnails bleiben nach Möglichkeit erhalten.",
        "desc_compress": "Komprimiert Videos über eine einfache Qualitäts-Skala 0–100; behält meist Container/Codec bei und schützt Cover/Thumbnails mit sinnvoller Audio-Logik.",
        "desc_trim": "Schneidet Segmente via Start+Länge oder Start+Ende; wähle schnelles GOP-Kopieren (verlustfrei) oder präzise Neukodierung mit Qualitäts-Preset.",
        "desc_scale": "Skaliert Videos auf eine Zielauflösung mit AR-Erhalt und automatischer Encoder-Alignierung; Thumbnails und Metadaten bleiben, soweit erlaubt.",
        "desc_crop_pad": "Zuschneiden oder Auffüllen pro Achse auf Zielauflösung mit optionalen Offsets; Thumbnails bleiben erhalten, Alpha-Quellen erhalten transparente Ränder.",
        "desc_interpolate": "Erhöht/normalisiert die Framerate per Bewegungsinterpolation; Ziel als Faktor oder FPS, Audio/Untertitel und Alpha bleiben soweit unterstützt.",
        "desc_screencast": "Bildschirm aufnehmen",
        "desc_record": "Externes Video via USB aufzeichnen",
        "desc_merge": "Führt Videos mit zusätzlichen Clips, Audiospuren oder Untertiteln zusammen; Steuerung von Vereinheitlichung, Offsets und Verlängerung, Streams/Kapitel/erstes Thumbnail bleiben erhalten.",
        "desc_extract": "Extrahiert Audiospuren, Untertitel, Einzelbilder oder video-only.",
        "desc_enhance": "Wendet ffmpeg-Filter für Stabilisierung, Denoise sowie Farb-/Helligkeitsanpassungen per Presets oder individuelle Werte an; Container/Codec werden automatisch gewählt.",
        "desc_ai_enhance": "Skaliert und entrauscht mit Real-ESRGAN/RealCUGAN; Modell, Skalierung, Denoise, Face-Enhance, TTA und Priorität steuerbar, Streams werden zurückremuxt.",
        "desc_gif": "Erstellt GIFs aus kurzen Videos mit optionalem Meme-Text; begrenzt Auflösung/FPS für geringe Größe oder behält auf Wunsch die Originalqualität.",
        "desc_images_to_video": "Erstellt aus Bildsequenzen ein Video mit natürlicher Sortierung; flexible Timing-Vorgaben (FPS/Bilddauer/Gesamtdauer) plus Format-/Codec-/Preset-Wahl, Alpha bleibt soweit unterstützt.",
        "desc_metadata": "Liest und bearbeitet Container-/Stream-Metadaten; zeigt technische Infos, gruppiert geschützte/bearbeitbare Tags und verwaltet Tags sowie eingebettete Thumbnails.",
        # Sonstige UI-Strings
        "package_description": "Tool zur Bearbeitung und Verbessern von Videos",
        "select_action_prompt": "     Aktion wählen:",
        "invalid_selection": "Ungültige Auswahl – Programm wird beendet.",
        "yes": "Ja",
        "no": "Nein",
        "back": "Zurück",
        "accept": "Akzeptieren",
        "reject": "Verwerfen",
        "files": "Dateien",
        "filename": "Dateiname",
        "help": "Hilfe",
        "help_show_help": "Diese Hilfe anzeigen und beenden",
        "cli_description": "Video Manager Kommandozeilen-Oberfläche",
        "help_input_files": "Eingabedateien (leer = interaktiver Modus)",
        "help_input_files_images": "Eingabebilder oder Ordner (natürliche Sortierung); leer = interaktiver Modus",
        "help_output_path": "Ausgabepfad/-datei (optional)",
        "help_format": "Zielcontainer/-format",
        "help_codec": "Videocodec (oder Copy-Passthrough)",
        "help_preset": "Encoding-Preset / Profil",
        "help_resolution": "Zielauflösung (z. B. 1920x1080 oder fixed:WxH)",
        "help_framerate": "Ziel-Framerate (z. B. 60 oder 30000/1001)",
        "help_quality_percent": "Qualität in Prozent (0–100)",
        "help_quality_preset": "Qualitäts-Preset für präzise Trim-Neukodierung",
        "help_trim_start": "Segment-Start (HH:MM:SS, MM:SS oder Sekunden)",
        "help_trim_duration": "Segment-Dauer",
        "help_trim_end": "Segment-Ende",
        "help_trim_precise": "Präzise Neukodierung (langsamer, framegenau)",
        "help_scale": "Video auf Zielauflösung skalieren",
        "help_preserve_ar": "Seitenverhältnis beim Skalieren beibehalten",
        "help_croppad": "Zuschneiden oder Auffüllen auf Zielauflösung mit Offsets",
        "help_offset": "Offset für Crop/Pad (X:Y)",
        "help_offset_x": "Horizontaler Offset",
        "help_offset_y": "Vertikaler Offset",
        "help_interpolate": "Framerate per Bewegungsinterpolation erhöhen/normalisieren",
        "help_factor_or_fps": "Faktor wie 2x oder absolute FPS (z. B. 60, 30000/1001)",
        "help_interpolate_quality": "Qualitäts-Preset für Interpolation",
        "help_convert": "Videos konvertieren; Format, Codec, Auflösung, FPS oder Preset wählen",
        "help_compress": "Videos mit einem Qualitätswert 0–100 komprimieren",
        "help_trim": "Videos per Start/Dauer oder Start/Ende schneiden",
        "help_scale_cmd": "Videos auf Zielauflösung skalieren",
        "help_merge": "Medien (Video/Audio/Untertitel) zusammenführen mit Offsets/Presets",
        "help_extract": "Audio, Untertitel, Frames oder video-only extrahieren",
        "help_enhance": "Stabilisierung, Denoise und Farb-/Helligkeitsanpassungen anwenden",
        "help_enhance_preset": "Preset für Verbesserungs-Parameter",
        "help_enhance_stabilize": "Stabilisierung aktivieren",
        "help_enhance_stab_method": "Stabilisierungsmethode",
        "help_enhance_stab_smooth": "Glättungsstärke der Stabilisierung",
        "help_enhance_stab_rx": "Horizontaler Deshake-Wert",
        "help_enhance_stab_ry": "Vertikaler Deshake-Wert",
        "help_enhance_denoise": "Rauschreduzierung einschalten",
        "help_enhance_denoise_method": "Rauschfilter",
        "help_enhance_denoise_intensity": "Intensität der Rauschreduzierung (0–100)",
        "help_enhance_warmth": "Wärme (0–100)",
        "help_enhance_tint": "Tönung (0–100)",
        "help_enhance_brightness": "Helligkeit (0–100)",
        "help_enhance_contrast": "Kontrast (0–100)",
        "help_enhance_saturation": "Sättigung (0–100)",
        "help_img2vid": "Video aus Bildsequenzen erzeugen mit Timing-Optionen",
        "help_framerate_or_duration": "Framerate oder Dauer pro Bild",
        "help_total_duration": "Gesamtdauer des erzeugten Videos",
        "help_img_scale": "Bilder auf Zielauflösung skalieren",
        "help_merge_target_res": "Wie die Auflösung vereinheitlicht wird (no-scale/smallest/average/largest/fixed)",
        "help_audio_offset": "Audio-Offset in Sekunden",
        "help_subtitle_offset": "Untertitel-Offset in Sekunden",
        "help_pause_between": "Pause zwischen Clips einfügen",
        "help_burn_subtitle": "Untertitel einbrennen",
        "help_subtitle_name": "Track-Name für Untertitel setzen",
        "help_audio_name": "Track-Name für Audio setzen",
        "help_extend_canvas": "Dauer auf längsten Input ausdehnen",
        "help_extract_frame": "Einzelnes Frame extrahieren (optional mit Zeitangabe)",
        "help_extract_audio": "Audiospuren extrahieren",
        "help_extract_video": "Video-only ohne Audio/Untertitel erstellen",
        "help_extract_subtitle": "Untertitel extrahieren (optional nach Sprache/Name filtern)",
        "help_extract_format": "Zielformat für Untertitel oder Frame-Bild",
        "help_aienhance": "KI-Upscaling/Denoise mit Real-ESRGAN/RealCUGAN",
        "help_ai_model": "Zu verwendendes KI-Modell",
        "help_ai_denoise": "Denoise-Stärke (0.0–1.0)",
        "help_ai_noise_level": "Rauschlevel (modellabhängig)",
        "help_ai_face_enhance": "Gesichtsverbesserung aktivieren",
        "help_ai_scale": "Upscale-Faktor",
        "help_ai_tta": "Test-Time-Augmentation aktivieren",
        "help_ai_blend": "Upscale mit Original mischen",
        "help_ai_blend_opacity": "Blend-Stärke (0–1)",
        "help_ai_priority": "Prozess-Priorität",
        "help_ai_force_overwrite": "Bestehende Ausgabe überschreiben",
        "help_ai_chunk": "Chunk-Größe (Frames) für Verarbeitung",
        "help_gif": "GIFs mit optionalem Meme-Text erstellen",
        "help_gif_text_top": "Oberer Meme-Text",
        "help_gif_text_bottom": "Unterer Meme-Text",
        "help_gif_font_size": "Schriftgröße für beide Texte",
        "help_gif_font_size_top": "Schriftgröße (oberer Text)",
        "help_gif_font_size_bottom": "Schriftgröße (unterer Text)",
        "help_gif_no_auto_open": "Erzeugtes GIF nicht automatisch öffnen",
        "help_gif_keep_quality": "Original-Auflösung/FPS möglichst beibehalten",
        "help_metadata": "Metadaten lesen/bearbeiten; Tags/Thumbnails auflisten/setzen/löschen",
        "help_meta_list_tags": "Alle Metadaten-Tags auflisten und beenden",
        "help_meta_list_tags_json": "Alle Metadaten als JSON ausgeben und beenden",
        "help_meta_list_tagnames": "Verfügbare Tag-Namen/Keys auflisten",
        "help_meta_all": "Auch Audio-/Untertitel-/Kapitelinfos auflisten",
        "help_meta_delete_thumbnail": "Eingebettetes Thumbnail löschen",
        "help_meta_set_thumbnail": "Eingebettetes Thumbnail aus Datei oder Timestamp setzen",
        "help_meta_show_thumbnail": "Eingebettetes Thumbnail anzeigen (falls unterstützt)",
        "help_meta_tag_generic": "Tag lesen/setzen (KEY lesen, KEY=WERT setzen). Wiederholbar.",
        "help_meta_read_or_set": "'{tag}' lesen (kein Wert) oder setzen (Wert übergeben).",
        "help_meta_list_tag": "Tag '{tag}' ausgeben",
        "help_meta_set_tag": "Tag '{tag}' setzen",
        "help_meta_delete_tag": "Tag '{tag}' löschen",
        "new_preview": "Neues Vorschaubild erzeugen",
        "skip": "Überspringen",
        "apply_settings": "Sollen die Einstellungen übernommen werden?",
        "invalid_input": "Ungültige Eingabe, bitte wählen Sie eine der Optionen oder 0 zum Beenden!",
        "could_not_determine_fps": "FPS konnten nicht ermittelt werden: {file}",
        "fps_change_summary": "FPS: {original} → {target}",
        "aborted_by_user": "Abbruch durch Benutzer",
        "settings_rejected": "Einstellungen verworfen",
        "choose_option": "Wähle eine Option",
        "custom": "Manuell konfigurieren",
        "invalid_ask_input": "Ungültige Eingabe! Bitte Zahl 1-{option_num}, 0 für Exit oder Enter für Standard wählen.",
        "choose_quality_preset": "Vordefinierte Qualität wählen",
        "allowed_range": "Erlaubter Bereich",
        "enter_float_value": "Bitte eine rationale Zahl eingeben",
        "invalid_float_number": "Ungültige Zahl oder Bruch (erlaubt: 12, 12.5, 12,5, 30000/1001)",
        "float_not_in_range": "Wert außerhalb des Bereichs",
        "enter_2integer_numbers": "Bitte zwei natürliche Zahlen eingeben",
        "start_time": "Startzeit",
        "end_time": "Ende",
        "duration": "Dauer",
        "precision": "Präzision",
        "precise": "Präzise und langsam, qualitätsabhängig",
        "fast-lossless": "Verlustfrei und schnell, aber ungenau",
        "quality": "Qualität",
        "copy-lossless": "Kopieren (verlustfrei)",
        "frame_not_created": "Frame wurde nicht erstellt!",
        "removed": "Entfernt",
        "preview_encode_error": "Vorschaubild konnte nicht erstellt werden!",
        "processing_filters_creating_image": "Verarbeite Filter und erstelle Vorschaubilder...",
        "enter_name": "Namen eingeben",
        "no_parameters_changed": "Keine Parameter geändert.",
        "process_parameters": "Prozessspezifische Parameter",
        "cancel_hint": "Abbrechen mit ESC • Strg+C/Strg+K",
        "canceled_info": "Abgebrochen (ESC/Strg+C/Strg+K).",
        # Prefixes (für Helper)
        "error_prefix": "FEHLER:",
        "warning_prefix": "WARNUNG:",
        # Enhance
        "enhance_presets_list": "Folgende Verbesserungsoptionen stehen zur Auswahl",
        "warmth": "Wärme",
        "tint": "Tönung",
        "brightness": "Helligkeit",
        "contrast": "Kontrast",
        "saturation": "Sättigung",
        "apply_stabilization": "Stabilisierung anwenden?",
        "select_stabilization": "Stabilisierungs-Filter wählen",
        "stabilization_explanation": "Reduziert Zittern und Bewegungsunschärfen im Video.",
        "vidstab_smooth_prompt": "Stabilisierung: Stärke (Smooth, 0=wenig, 100=sehr stark) [{default}]: ",
        "deshake_rx_prompt": "Deshake rx (horiz. max. Verschiebung, 0–100) [{default}]: ",
        "deshake_ry_prompt": "Deshake ry (vert. max. Verschiebung, 0–100) [{default}]: ",
        "analyze_vidstab": "   Analysiere #ifilename für vidstab-Stabilisierung...",
        "analyze_vidstab_done": "   Analyse von #ifilename für vidstab-Stabilisierung abgeschlossen!",
        "noise_reduction_method": "Rauschreduzierung",
        "apply_noise_reduction": "Rauschreduzierung anwenden?",
        "noise_explanation": "Reduziert Bildrauschen, besonders bei schlechten Lichtverhältnissen oder alten Videos.",
        "select_denoising_filter": "Denoising-Filter wählen",
        "noise_intensity_promt": "Denoise-Intensität (0=aus, 100=max) [{default}]: ",
        "color_correction_method": "Farb-/Helligkeitskorrektur",
        "apply_color_correction": "Farb- & Helligkeitskorrektur anwenden?",
        "color_correction_explanation": "Passt Farbbalance, Tönung, Helligkeit und Kontrast an.",
        "color_warmth_promt": "Wärme      (0=kühl, 50=neutral, 100=warm) [{default}]: ",
        "color_tint_promt": "Tönung     (0=magenta, 50=neutral, 100=grün) [{default}]: ",
        "color_brightness_promt": "Helligkeit (0=dunkel, 50=neutral, 100=hell) [{default}]: ",
        "color_contrast_promt": "Kontrast   (0=niedrig, 50=neutral, 100=hoch) [{default}]: ",
        "color_saturation_promt": "Sättigung  (0=niedrig, 50=neutral, 100=hoch) [{default}]: ",
        "no_color_correction": "Alle Werte neutral, es werden keine Farb-/Helligkeitsänderungen angewendet.",
        "no_filter_no_video": "Keine Filter aktiviert, es wird kein neues Video erstellt.",
        "enhancing_file_progress": "Aufpolieren von #ifilename mit allen Modifikationen",
        "enhancing_file_done": "Verbesserung wurde in Datei #ofilename geschrieben!",
        "get_preview_time_input": "Zeitpunkte für Vorschau angeben (in Prozent, z. B. '19,84') [{default}]: ",
        "read_percent_error": "Ungültige Eingabe. Bitte eine Zahl zwischen 0 und 100 eingeben.",
        "frame_extract_error": "Vorschau-Frames konnten nicht extrahiert werden.",
        "preview_disabled_no_inline": "Vorschau deaktiviert (keine Inline-Bilder).",
        "preset_no_active_filter": "Dieses Preset hat keine aktiven Filter.",
        "selected_parameters_header": "Ausgewählte Parameter",
        "stabilize": "Stabilisierung anwenden",
        "stab_method": "Stabilisierungsverfahren",
        "stab_smooth": "Glättungsstärke der Stabilisierung",
        "stab_rx": "Horizontaler Entschütterungs-Parameter",
        "stab_ry": "Vertikaler Entschütterungs-Parameter",
        "denoise": "Rauschreduzierung anwenden",
        "denoise_method": "Rauschfilter",
        "denoise_intensity": "Intensität der Rauschreduzierung",
        "unsuitable_codec": "Codec {codec} ungeeignet für {container} → nehme {sugg}",
        "no_encoder_for_codec": "Kein Encoder für {codec} in {container}. Überspringe...",
        # AI – Prompts, Labels, Fortschritt
        "ai_choose_model": "KI-Modell auswählen",
        "ai_model": "KI-Modell",
        "ai_model_default_used": "Kein KI-Modell angegeben — verwende Standard: {model}",
        "ai_model_interpreted_as": "Eingabe interpretiert als: {model}",
        "ai_model_unknown_choose": "Unbekanntes Modell — bitte auswählen",
        "ai_denoise_strength_prompt": "Denoise-Stärke (0,0–1,0) [{default}]: ",
        "ai_denoise_strength_label": "Denoise (0–1)",
        "ai_denoise_percent_prompt": "Denoise-Prozentsatz (0–100) [{default}]: ",
        "ai_face_enhance_q": "Gesichts-Verbesserung aktivieren?",
        "ai_face_enhance_label": "Gesichts-Verbesserung",
        "ai_worker_default_choose": "Prozess Priorität auf 'Auto' gesetzt",
        "ai_worker_setting_not_found": "Prioritätseinstellung nicht in 'auto' 'min' 'medium' 'max'",
        "ai_chunk_size_label": "Chunk-Größe (Frames)",
        "ai_tmp_dir_using": "Verwende temporäres Verzeichnis: {dir}",
        "ai_tmp_selected": "Temporäres Verzeichnis ausgewählt.",
        "ai_not_enough_space": "Nicht genug freier Speicher (> {need} GB benötigt), frei: {free:.1f} GB — Abbruch.",
        "ai_framecount_failed": "Konnte Anzahl der Frames nicht ermitteln — Datei wird übersprungen.",
        "ai_extract_frames_progress": "Extrahiere Frames …",
        "ai_extract_frames_done": "Frames extrahiert.",
        "ai_upscaling_progress": "Upscaling …",
        "ai_upscaling_done": "Upscaling abgeschlossen.",
        "ai_segment_progress": "Segment wird erstellt …",
        "ai_segment_done": "Segment erstellt.",
        "ai_chunk_extract_progress": "Chunk {idx}: Extrahiere Frames",
        "ai_chunk_extract_done": "Chunk {idx}: Frames extrahiert",
        "ai_chunk_no_frames": "Chunk {idx}: Keine Frames extrahiert!",
        "ai_chunk_upscale_progress": "Chunk {idx}: Upscaling",
        "ai_chunk_upscale_done": "Chunk {idx}: Upscaling abgeschlossen",
        "ai_chunk_upscale_failed": "Chunk {idx}: Upscaling fehlgeschlagen",
        "ai_chunk_no_upscaled": "Chunk {idx}: Kein upgescalter Frame!",
        "ai_chunk_archive": "Chunk {idx}: Archiviere …",
        "ai_chunk_reencode_progress": "Chunk {idx}: Re-Encode",
        "ai_chunk_reencode_done": "Chunk {idx}: Segment erstellt",
        "ai_chunk_encode_failed": "Chunk {idx}: FFmpeg-Encode fehlgeschlagen!",
        "ai_concat_progress": "Finale Zusammenführung",
        "ai_concat_done": "Fertiges Video '{video}' erstellt",
        "ai_concat_failed": "Finale Zusammenführung fehlgeschlagen.",
        "ai_segment_delete_fail": "Segment konnte nicht gelöscht werden: {seg} — {err}",
        "ai_tmp_cleanup_ok": "Temporäres Verzeichnis {dir} gelöscht.",
        "ai_tmp_cleanup_failed": "Temporäres Verzeichnis {dir} konnte nicht vollständig gelöscht werden.",
        "ai_tmp_cleanup_warn": "Temporäres Verzeichnis konnte nicht vollständig bereinigt werden; einige Dateien verbleiben.",
        # Convert
        "choose_format": "Wähle das Zielformat",
        "choose_codec": "Wähle den Videocodec für das Format {format}",
        "choose_resolution": "Wähle die gewünschte Auflösung",
        "want_framerate_cap": "Soll die Framerate beschränkt werden? Aktuelle maximale Framerate: {max_fps}.",
        "enter_framerate_cap": "Bitte die maximale Framerate eingeben",
        "enter_custom_resolution": "Benutzerdefinierte Auflösung eingeben (z. B. 640:480)",
        "width_height_not_allowed": "Auflösungen: Breite > 0, Höhe ≠ 0; Höhe:\n -1 = automatisch mit Seitenverhältnis, nicht zwingend gerade\n -2 = automatisch mit Seitenverhältnis und auf gerade runden",
        "wrong_negative_height": "Für negative Höhe sind nur Werte erlaubt:\n -1 = automatisch mit Seitenverhältnis, nicht zwingend gerade\n -2 = automatisch mit Seitenverhältnis und auf gerade runden",
        "width_to_big": "Breite {w_new}px größer als Originalbreite {w_old}px",
        "height_to_big": "Höhe {h_new}px größer als Originalhöhe {h_old}px",
        "width_height_must_even": "Breite und Höhe müssen gerade sein (4:2:0-Encoder)",
        "converting_file_progress": "Konvertierung von #ifilename im Gange",
        "converting_file_done": "Konvertierung wurde in Datei #ofilename umgesetzt",
        "bitstream_copy": "Bitgenaue Kopie, Video wird nicht neu codiert",
        "strict_copy": "Mathematisch verlustfrei, Video wird neu codiert",
        "analysing_lossless": "Analysiere verlustfreie Kombinationen...",
        "prepare_encoder_maps_fallback_keep_failed": "Fallback 'keep' für Encoder-Maps fehlgeschlagen: {error}",
        "alpha_alternative_suggestions": "Mögliche Alpha-Alternativen: {list}",
        "invalid_framerate_arg": "Ungültiges Bildraten-Argument: {value} — verwende Quell-FPS",
        "custom_resolution_validation_failed": "Validierung der benutzerdefinierten Auflösung fehlgeschlagen: {error}",
        # Compress
        "enter_quality_percent": "Qualität (0 = max. Komprimierung, 100 = beste Qualität) [ENTER = {default}]",
        "maped_quality_crf": "Qualität {quality_percent} auf CRF = {crf_value} abgebildet",
        "invalid_quality_value": "Ungültiger Wert für --quality. Bitte eine ganze Zahl zwischen 0 und 100.",
        "compressing_file_progress": "Komprimierung von #ifilename im Gange",
        "compressing_file_done": "Datei #ofilename wurde komprimiert",
        "compressing_file_finished": "Komprimierung in Datei {file} abgeschlossen",
        "compress_codec_change": "Der Original-Codec '{ocodec}' wurde auf einen verlustbehafteten Codec geändert ⇒ '{ncodec}'",
        "smart_keep_used": "Komprimierung hat keinen Effekt ⇒ Smart Copy",
        # Trim
        "trim_start_promt": "Startzeit im Format (HH:MM:SS, MM:SS, SS)",
        "trim_start_prompt": "Startzeit im Format (HH:MM:SS, MM:SS, SS)",
        "trim_len_or_end_prompt": "   Trim-Länge oder Endzeit\n   Dauer: '+1:00', 'd:1:00', 'dur:1:00', 'duration:1:00'\n   Ende: '2:30', 'end:2:30', '@2:30'\n   '0' = Beenden\n   Format (HH:MM:SS | MM:SS | SS):",
        "confirm_apply_trim": "Sollen die Zeiten angewendet werden?",
        "invalid_start": "Die Startzeit ist inkorrekt ({val})!",
        "invalid_end": "Die Endzeit ist inkorrekt!",
        "end_must_be_gt_start": "Die Endzeit ({end}) muss nach der Startzeit ({start}) liegen.",
        "need_duration_or_end": "Es muss entweder eine Dauer oder eine Endzeit angegeben werden (z. B. '+1:00' oder '2:30')",
        "invalid_duration": "Ungültige Dauer. Verwende HH:MM:SS, MM:SS oder SS.",
        "duration_and_end_given_use_duration": "Sowohl Dauer als auch Endzeit sind angegeben, es wird die Dauer verwendet.",
        "duration_must_be_pos": "Die Dauer muss größer als 0 sein",
        "choose_trim_mode": "Wähle die Methode fürs Zuschneiden",
        "trim_mode_fast_desc": "Originalvideo kopieren ⇒ verlustfreie Qualität, sehr schnell, aber nicht sehr präzise (Keyframe-abhängig, max. ±6s)",
        "trim_mode_precise_desc": "Video neu codieren ⇒ abhängig von Qualitätswahl, sehr langsam und sehr präzise",
        "trim_copy_failed_fallback_reencode": "Direktes Stream-Copy beim Trimmen ist fehlgeschlagen.\nEs wird auf Neukodierung zurückgegriffen, um eine abspielbare Datei zu erzeugen;\ndas kann länger dauern und geringfügige Qualitätsänderungen verursachen.",
        "trimming_file_progress": "Zuschneiden von #ifilename im Gange",
        "trimming_file_done": "Zugeschnittene Datei #ofilename erzeugt",
        "trim_preview_skipped": "Vorschau übersprungen",
        # Extract
        "select_extract_type": "Wähle den Extraktionstyp",
        "no_audio_tracks": "Keine Audiotracks in '{filename}'!",
        "select_subtitle_format": "Wähle das Untertitelformat",
        "select_preferred_subtitle_languages": "Bevorzugte Untertitelsprache(n) wählen",
        "enter_languages_comma": "  Sprachen eingeben (kommagetrennt; Codes oder Namen,\n  z. B. de,en oder Deutsch,English)",
        "lang_fallback_all": "Keine gültigen Einträge erkannt – es werden alle Sprachen berücksichtigt!",
        "no_subtitle_tracks": "Keine Untertiteltracks in '{filename}' gefunden!",
        "subtitle_is_bitmap": "Untertitelspur {trackname} ist Bitmap ({codec}); extrahiere Original stattdessen!",
        "select_frame_format": "Bildformat wählen",
        "select_frame_time_preset": "Zeitpunkt wählen, zu dem der Frame extrahiert werden soll",
        "enter_frame_time": "Zeitpunkt für die Frame-Extraktion im Format (HH:MM:SS, MM:SS, SS)\noder mit %-Zeichen für prozentuale Angabe",
        "invalid_time_input": "Ungültige Eingabe. Format HH:MM:SS, MM:SS oder SS, oder eine Zahl mit %-Zeichen verwenden",
        "no_duration_fallback": "Die Videodauer konnte nicht ermittelt werden, nehme 1 s stattdessen",
        "extracting_audio_progress": "Extrahiere Audio aus #ifilename",
        "extracting_audio_done": "Audioextraktion in #ofilename gespeichert",
        "extracting_subtitle_progress": "Extrahiere Untertitel aus #ifilename",
        "extracting_subtitle_done": "Untertitelextraktion in #ofilename gespeichert",
        "extracting_frame_progress": "Extrahiere Frame aus #ifilename",
        "extracting_frame_done": "Frame-Extraktion in #ofilename gespeichert",
        "extracting_videoonly_progress": "Extrahiere Video aus #ifilename",
        "extracting_videoonly_done": "Video-Extraktion in #ofilename gespeichert",
        "no_audio_track": "Keine Audiospuren in '{filename}'!",
        "invalid_image_format": "Unbekanntes Bildformat '{fmt}'!",
        "invalid_sub_format": "Unbekanntes Untertitel Format '{fmt}'!",
        "unknown_format_entry": "Unbekannte --format Einträge:",
        # Metadata
        "edit_metadata_prompt": "Möchtest du Metadaten bearbeiten?",
        "editable_tags_set": "Bearbeitbare Tags (gesetzt)",
        "editable_tags_unset": "Bearbeitbare Tags (ungesetzt)",
        "protected_metadata_tags": "Geschützte Metadaten-Tags",
        "editable_metadata_tags": "Bearbeitbare Metadaten-Tags",
        "selected_tags_in_file": "Ausgewählte Tags in {filename}",
        "set_thumbnail": "Vorschaubild setzen",
        "delete_thumbnail": "Vorschaubild löschen",
        "exit_and_save": "Beenden und speichern",
        "select_tag_number": "Tag-Nummer zum Bearbeiten/Löschen wählen:",
        "invalid_input_number": "Ungültige Eingabe. Zahl oder '#' eingeben.",
        "cover_image_progress": "Bereite das Vorschaubild vor",
        "cover_image_done": "Vorschaubild vorbereitet",
        "quit_no_changes": "Beendet – keine Änderungen.",
        "enter_new_value_for": "Neuen Wert für '{name}' eingeben (leer = löschen): ",
        "tag_deleted": "Tag '{key}' gelöscht.",
        "skip_protected_tag": "Geschützten Tag '{key}' überspringen.",
        "select_thumbnail_source": "Vorschaubild-Quelle wählen",
        "image_file": "Externes Bild",
        "extract_frame": "Frame aus Video extrahieren",
        "frame_extracted": "Vorschaubild wurde aus #ifilename extrahiert.",
        "frame_extraction_failed": "Frame-Extraktion fehlgeschlagen!",
        "failed_to_prepare_cover": "Vorbereitung des Vorschaubildes fehlgeschlagen!",
        "extracting_cover": "Eingebettetes Vorschaubild extrahieren...",
        "cover_extracted": "Vorschaubild extrahiert.",
        "thumbnail_exist": "Vorschaubild vorhanden",
        "thumbnail_exists": "Vorschaubild vorhanden",
        "thumbnail_not_set": "Kein Vorschaubild gesetzt",
        "no_mp4_stream": "Keine vorhandenen MP4-Cover-Streams zu entfernen.",
        "cleaning_mp4_stream": "Bisherige MP4-Cover-Streams bereinigen …",
        "removing_cover": "Entferne bisheriges Vorschaubild …",
        "cover_removed": "Vorheriges Vorschaubild entfernt",
        "mp4_cover_removed": "Alte MP4-Cover-Streams entfernt.",
        "could_not_remove_mp4_cover": "Alte Cover-Streams konnten nicht entfernt werden (Original bleibt erhalten).",
        "apply_thumbnail": "Soll das Bild als Thumbnail verwendet werden?",
        "embedding_thumbnail_progress": "Vorschaubild wird eingebettet...",
        "embedding_thumbnail_done": "Vorschaubild eingebettet",
        "embedding_failed": "Einbetten fehlgeschlagen (kein Output)!",
        "embedding_skipped": "Einbetten übersprungen",
        "thumbnail_verification_failed_ffprobe": "Vorschaubild-Verifikation fehlgeschlagen. ffprobe-Zusammenfassung:",
        "thumbnail_verification_failed_no_stream": "Vorschaubild-Verifikation fehlgeschlagen – kein attached_pic-Stream gefunden.",
        "thumbnail_verification_failed_no_attachment": "Vorschaubild-Verifikation fehlgeschlagen – Attachment fehlt.",
        "cover_preparation_failed": "Cover-Vorbereitung fehlgeschlagen.",
        "no_image_selected_canceled": "Kein Bild ausgewählt — abgebrochen.",
        "no_image_selected_no_change": "Kein Bild ausgewählt — keine Änderungen.",
        "embedding_failed_restore": "Einbetten fehlgeschlagen — Backup wird wiederhergestellt. Fehler: {error}",
        "thumbnail_verified": "Vorschaubild überprüft",
        "thumbnail_removed": "Vorschaubild entfernt",
        "no_thumbnail_found": "Kein eingebettetes Vorschaubild gefunden",
        "container_not_support_cover": "Der Container unterstützt keine eingebetteten Cover",
        "removing_cover_attachments": "Angehängtes Cover entfernen...",
        "removing_embedded_thumbnail": "Eingebettetes Vorschaubild entfernen...",
        "no_video_stream": "Die Video-Stream-Informationen konnten nicht abgerufen werden.",
        "ffmpeg_missing_install": "ffmpeg wurde nicht gefunden – bitte zuerst installieren.",
        "no_metadata_found": "Keine Metadaten gefunden",
        "side_car_poster": "Container wird nicht unterstützt → Begleitbild erstellen",
        "side_car_poster_saved": "Begleitbild wurde als {file} gespeichert.",
        "failed_update_metadata": "Metadaten konnten nicht aktualisiert werden!",
        "writing_metadata_progress": "Schreibe Metadaten in #ifilename",
        "writing_metadata_done": "Metadaten wurden in #ofilename geschrieben",
        "metadata_sucessfully_updated": "Aktualisierung der Metadaten in {filename} war erfolgreich!",
        "metadata_not_fully_written": "Metadaten konnten nicht vollständig in '{filename}' geschrieben werden: {missing}",
        "metadata_write_failed": "Metadaten konnten nicht in '{filename}' geschrieben werden: {error}",
        "color_primaries_label": "Primaries",
        "color_trc_label": "Transfer/TrC",
        "color_matrix_label": "Matrix",
        "color_range_label": "Range",
        "chapters_label": "Kapitel",
        "chapter_fallback_title": "Kapitel {index}",
        "chapters_more": "… +{count} weitere",
        "audio_codec_label": "Audio-Codec",
        "audio_bitrate_label": "Audio-Bitrate",
        "audio_channels_label": "Audio-Kanäle",
        "sample_rate_label": "Sample-Rate",
        "language_label": "Sprache",
        "thumbnail_label": "Thumbnail",
        "resolution_encoded_label": "Auflösung (kodiert)",
        "display_resolution_label": "Display-Auflösung",
        "codec_label": "Codec",
        "fps_label": "FPS",
        "pixel_format_label": "Pixel-Format",
        "alpha_channel_label": "Alpha-Kanal",
        "transparency_content_limited_label": "Transparenz (Inhalt, bis 200 Frames)",
        "transparency_content_label": "Transparenz (Inhalt)",
        "audio_streams_label": "Audio-Streams",
        "subtitle_streams_label": "Untertitel-Streams",
        "virtual_readonly_header": "Virtuell / Nur lesen",
        "video_info_header": "Video-Info",
        "other_metadata_tags": "Weitere Metadaten-Tags",
        # GIF
        "gif_press_enter_to_skip_text": "ENTER drücken, um Text zu überspringen.",
        "gif_text_prompt_top": "Meme-Text (oben)",
        "gif_text_prompt_bottom": "Meme-Text (unten)",
        "gif_choose_font_size": "Schriftgröße wählen",
        "gif_choose_fs_top": "Schriftgröße (oben) wählen",
        "gif_choose_fs_bottom": "Schriftgröße (unten) wählen",
        "convert_to_gif_resolution": "Auf übliche GIF-Auflösung und FPS konvertieren (empfohlen)?",
        "gif_creating_progress": "Erzeuge GIF aus #ifilename",
        "gif_created_done": "GIF erstellt: #ofilename",
        "gif_creation_finished": "GIF-Erstellung abgeschlossen",
        # Crop/Pad
        "croppad_method": "crop-pad",
        "croppad_choose_resolution": "Zielauflösung auswählen",
        "croppad_enter_custom_info": "Benutzerdefinierte Auflösung im Format Breite×Höhe eingeben (Trennzeichen wie x, :, /, -, ., , werden akzeptiert).",
        "croppad_prompt_custom_resolution": "Zielauflösung (z. B. 1920x1080)",
        "croppad_invalid_resolution": "Ungültige Auflösung. Bitte Breite×Höhe angeben, z. B. 1920x1080.",
        "croppad_custom_requires_interactive": "Die Option 'Custom' kann nur im interaktiven Modus verwendet werden.",
        "croppad_prompt_offset_x": "X-Versatz vom Zentrum (ENTER = 0):",
        "croppad_prompt_offset_y": "Y-Versatz vom Zentrum (ENTER = 0):",
        "croppad_offset_invalid": "Versatz ist ungültig – es wird 0 verwendet.",
        "croppad_probe_failed": "Videoeigenschaften konnten nicht ermittelt werden.",
        "croppad_skip_original": "Überspringe '{filename}' (Originalauflösung beibehalten).",
        "croppad_skip_same_res": "Überspringe '{filename}' (bereits {w}x{h}).",
        "croppad_progress_cropping": "Zuschneiden …",
        "croppad_progress_padding": "Auffüllen …",
        "croppad_done_cropping": "Zugeschnitten:",
        "croppad_done_padding": "Auffüllen abgeschlossen:",
        # Scale
        "enter_custom_resolution_explanation": "Akzeptiert beliebige Trennzeichen (':', ',', '/', 'x', 'X', ';', '*', Space)",
        "scale_preserve_ar_prompt": "Soll das Seitenverhältnis erhalten bleiben? ",
        "scale_preserve_ar_explanation": "(Ja = proportional skalieren; Nein = exakt auf die Zielgröße strecken)",
        "scale_custom_requires_interactive": "Für 'custom' ist der interaktive Modus erforderlich.",
        "scale_invalid_resolution": "Ungültige Auflösung.",
        "scale_probe_failed": "Konnte die Videoabmessungen nicht ermitteln.",
        "scale_skip_original": "Überspringe '{filename}' (Originalauflösung beibehalten).",
        "scale_skip_same_res": "Überspringe '{filename}' (bereits {w}x{h}).",
        "scaling_progress": "Skaliere #ifilename auf Auflösung → {width}×{height}",
        "scaling_done": "Datei #ofilename auf Zielauflösung → {width}×{height} skaliert",
        "scaling_to": "Skaliere auf Auflösung",
        "even_align_fix": "Even-Align-Fix für",
        "passed_no_resolution": "Keine Auflösung übergeben",
        # Interpolate
        "enter_factor_or_fps": "Ziel-FPS oder Framerate-Faktor eingeben, gekennzeichnet mit „x“ (z. B. 2x, 0,5x)",
        "invalid_framerate_input": "Ungültige Eingabe. Entweder Bildfrequenz oder einen Faktor mit nachfolgendem „x“ eingeben!",
        "interpolation_in_progress": "Interpoliere #ifilename von {oFPS} FPS zu {nFPS} FPS",
        "interpolation_done": "Interpolation in #ofilename auf {FPS} FPS fertiggestellt",
        "std_quality": "Ausgewogen; direkte Interpolation ohne Zusatzfilter.",
        "hq_quality": "Leichtes Pre-Denoising vor der MV-Schätzung für stabilere Bewegungsvektoren.",
        "max_quality": "Stärkeres Pre-Denoising plus sanftes Nachschärfen für möglichst sauberes Resultat.",
        # Images to Video
        "enter_fps_or_duration": "Gewünschte Bildfrequenz (X{fps,fp,f}), Zeit pro Frame (X{h,m,s,ms,ns}) oder Gesamtdauer (HH:MM:SS MM:SS SS S) für das Video eingeben",
        "creating_video_progress": "Erstelle Video #ofilename aus Bildreihe",
        "creating_video_done": "Video #ofilename wurde aus Bildreihe erstellt",
        "croppad_or_scale": "SSollen abweichende Auflösungen gestutzt/gefüllt oder skaliert werden?",
        "crop_or_pad_to_target": "Beschneidet oder befüllt zur Zielauflösung",
        "scale_to_target": "Skaliert auf Zielauflösung",
        "smallest_resolution": "Verwende die kleinste vorkommende Auflösung",
        "average_resolution": "Verwende die durchschnittliche Auflösung",
        "largest_resolution": "Verwende die größte vorkommende Auflösung",
        "no_valid_frames_found": "Keine gültigen Frames gefunden",
        "enforce_cfr_question": "Konstante Bildrate erzwingen?",
        "enforce_cfr_explanation": "Es wurde eine Gesamtdauer eingegeben. Wenn aktiviert, verwendet die Ausgabe eine feste FPS (CFR). Andernfalls wird eine variable Bildrate (VFR) genutzt.",
        "choose_cfr_fps": "FPS für konstante Bildrate (z. B. 25):",
        "could_not_write_tempfile": "Temporäre Listendatei konnte nicht geschrieben werden: {error}",
        "no_file_passed": "Keine Datei(en) übergeben.",
        "duration_unparsable": "--duration konnte nicht geparst werden: {value} ({error}); nutze stattdessen Bildrate.",
        "analysing_source_images": "Analysiere die Ausgangsbilder ...",
        # --- video_record ---
        "v4l2_device_label": "{label} ({node})",
        "alsa_device_label": "ALSA {card_name} – {device_name} (plughw:{c},{d})",
        "pulse_device_label": "Pulse {desc} ({name})",
        "no_audio_option": "— (ohne Audio)",
        "audio_none_dash": "—",
        "no_v4l2_devices": "Keine V4L2-Geräte gefunden (v4l2-ctl installiert?).",
        "pick_video_device": "Video-Gerät wählen",
        "no_video_source_selected": "Keine Videoquelle gewählt.",
        "v4l2_busy_try_alt": "{curr} belegt/nicht verfügbar — verwende {alt}.",
        "v4l2_busy_unavailable": "Video-Gerät ist belegt oder nicht verfügbar.",
        "pick_audio_source": "Audio-Quelle wählen",
        "no_audio_source_selected": "Keine Audioquelle gewählt.",
        "alsa_busy_switch_to_pulse": "ALSA belegt — wechsle zu Pulse {name}.",
        "audio_source_problem_no_audio": "Audio-Quelle belegt/fehlerhaft — Aufnahme ohne Audio.",
        "choose_preset": "Preset wählen",
        "preset_desc_fallback": "Preset '{name}'",
        "choose_container_format": "Container/Format wählen",
        "choose_codec_for_format": "Codec für {format} wählen",
        "set_fixed_duration_q": "Feste Dauer setzen?",
        "enter_duration_prompt": "Dauer angeben (HH:MM:SS oder Sekunden)",
        "output_file_prompt": "Zieldatei",
        "infinite_enter_stop": "∞ (ENTER zum Stoppen)",
        "recording_in_progress": "Aufnahme läuft …",
        "recording_done": "Aufnahme abgeschlossen: {filename}",
        "recording_started_enter_stop": "Aufnahme gestartet …   (ENTER = Stop)",
        "ffmpeg_not_clean_last_lines": "ffmpeg nicht sauber beendet — letzte Zeilen:",
        "no_output_file_produced": "Keine Ausgabedatei erzeugt.",
        "unknown_format_using_default": "Unbekanntes Format '{fmt}' — nutze {default}.",
        "codec_not_allowed_using_suggested": "Codec '{codec}' unzulässig für {container} — nutze Vorschlag.",
        # Merge
        "selected_parameters": "Ausgewählte Parameter",
        "container": "Container",
        "video_codec": "Video-Codec",
        "target_resolution": "Zielauflösung",
        "video_files": "Videodateien",
        "output_name": "Ausgabename",
        "pause": "Pause",
        "select_second_file_to_merge": "Zweite Datei zum Zusammenführen auswählen",
        "choose_video_codec": "Videocodec wählen",
        "choose_target_resolution_strategy": "Zielauflösungs-Strategie wählen",
        "fit_mode_prompt": "Wie sollen die Clips in die Auflösung des ersten Videos passen?",
        "pad_to_target": "Auf Ziel auffüllen",
        "crop_to_target": "Auf Ziel zuschneiden",
        "enter_offset_for_audio": "Versatz für Audiospur (z. B. 1.5s, -00:00:01.5)",
        "enter_offset_for_subtitle": "Versatz für Untertitelspur (z. B. 1.5s, -00:00:01.5)",
        "offset_before_all_clips_optional": "Versatz vor allen Clips (optional)",
        "pause_between_clips": "Pause zwischen Clips",
        "subtitle_name_prompt": "Titel der Untertitelspur (optional)",
        "need_two_files": "Es werden zwei Dateien benötigt.",
        "need_at_least_two_files": "Mindestens zwei Dateien zum Zusammenführen erforderlich.",
        "no_video_files_found": "Keine Videodateien gefunden.",
        "no_prepared_files": "Keine vorbereiteten Dateien",
        "preparing_clip": "Clip wird vorbereitet …",
        "prepared_clip": "Clip vorbereitet.",
        "creating_silent_clip": "Stumm-Clip wird erstellt …",
        "created_output": "Die Datei #ofilename wurde erstellt.",
        "burning_subtitles": "Untertitel werden in #ifilename eingebrannt …",
        "merging_audio_into": "Audio wird in Video gemischt …",
        "adding_subtitles": "Untertitel werden hinzugefügt …",
        "concatenating_preprocessed_clips": "Vorbereitete Clips werden zusammengefügt …",
        "merged_to_output": "Zusammenführen zu #ofilename abgeschlossen",
        # Strategienamen (für Menüs)
        "match_first_resolution": "Erste Videoauflösung übernehmen (anpassen)",
        "no_scale_pad_to_max": "Nicht skalieren (auf Maximum auffüllen)",
        "smallest": "Kleinste",
        "average": "Durchschnitt",
        "largest": "Größte",
        # Labels für die Parametertabelle
        "label_video_device": "Video-Gerät",
        "label_audio_source": "Audio-Quelle",
        "label_preset": "Preset",
        "label_container": "Container",
        "label_codec": "Codec",
        "label_encoder": "Encoder",
        "label_duration": "Dauer",
        "label_output": "Ausgabe",
        # General file and other prompts
        "analysing_video": "Analysiere Videodatei",
        "analysing_video_done": "Video analysiert!",
        "enter_time_or_percent": "Zeit oder Prozentwert eingeben",
        "target": "Ziel",
        "file_size": "Dateigröße",
        "original_size": "Originalgröße",
        "compressed_size": "Komprimierte Größe",
        "resolution": "Auflösung",
        "offset": "Versatz",
        "audio_offset": "Audio Versatz",
        "subtitle_offset": "Untertitel Versatz",
        "target_pix_fmt": "Ziel-Pixelformat",
        "not_set": "Nicht gesetzt",
        "enter_numbers_to_select_files": "Wähle die Dateien aus (z. B. 1,3,5-7,+),\n  drücke ENTER für alle oder 0 zum Beenden:",
        "file_not_found": "Datei nicht gefunden: {file}",
        "no_matching_file_found": "Keine passende Datei gefunden!",
        "import_ok": "Video erfolgreich importiert",
        "passed_no_file": "Es wurde kein Dateiname übergeben!",
        "found_files": "Gefundene Dateien",
        "selected_files": "Ausgewählte Dateien",
        "overwrite_file": "existiert bereits, überschreiben?",
        "change_filename": "Dateinamen ändern",
        "new_filename": "Neuen Dateinamen eingeben",
        "overwrite_existing_file": "Bestehende Datei überschreiben",
        "warn_unknown_args": "Unbekanntes Argument: {args}",
        "starting": "gestartet",
        "exit": "Beenden",
        "exiting": "Beenden",
        "finished": "Abgeschlossen",
        "tmp_no_suitable_dir": "Kein temporäres Verzeichnis mit genügend freiem Speicherplatz gefunden.",
        "persist_write_json_failed": "[persist] write_json fehlgeschlagen: {error}",
        "no_files_match_pattern": "Keine Dateien passen auf Muster: {pattern}",
        # Presets / helpers
        "preset": "Voreinstellung",
        "invalid_preset": "Ungültiges Preset",
        # ── NEU / AI-Enhance Ergänzungen ─────────────────────────────────────
        "ai_no_valid_png_frames": "Keine gültigen PNG-Frames gefunden",
        "ai_no_upscaled_abort_encode": "Upscaled-Frames nicht gefunden – Encode wird abgebrochen.",
        "ai_ffconcat_write_failed": "ffconcat-Liste konnte nicht geschrieben werden: {err}",
        "ai_ffmpeg_concat_diag_tail": "FFmpeg-Diagnose (Concat, letzte Zeilen):",
        "ai_backends_missing": "Fehlende Backends: weder {path} noch 'realesrgan-ncnn-vulkan' oder 'realcugan-ncnn-vulkan' gefunden.",
        "ai_outscale_prompt": "Upscale-Faktor (Outscale)",
        "ai_tta_question": "TTA aktivieren? (langsamer, teils weniger Artefakte)",
        "ai_blend_question": "Upscale mit Original mischen (Blend)?",
        "ai_blend_opacity_prompt": "Blend-Stärke (0.5–1.0, 1.0 = nur Upscale)",
        "ai_weight_missing": "Gewicht '{file}' nicht gefunden – Real-ESRGAN (Python) wird ggf. nichts ausgeben.\nBitte sicherstellen: {dir}/weights/{file}",
        "ai_weight_ok": "Gewicht OK: {name}",
        "ai_realcugan_noise_prompt": "RealCUGAN: Denoise/Noise-Level wählen",
        "ai_analysis_mode_no_overwrite": "Analysis-Mode aktiv – überschreibe nicht. Output: {name}",
        "ai_sequence_stats": "Sequenz-Länge: {n} | first: {first} | last: {last}",
        "ai_cancel_cleanup": "Abgebrochen – Aufräumen…",
        "ai_blend_created": "Blend erstellt: {name}",
        "ai_blend_failed_fallback": "Blend fehlgeschlagen – gebe ungeblendete Datei aus.",
        "ai_tta_retry_disable": "TTA lieferte keine Ausgaben — versuche ohne TTA erneut…",
        "ai_tta_retry_success": "Neulauf ohne TTA erfolgreich.",
        "ai_model_not_found": "Das angegebene KI-Modell {model} wurde nicht gefunden",
        "ai_feature_disabled": "KI-Funktionen sind in der Konfiguration deaktiviert (ai.enabled=false). Aktiviere sie in der config.ini oder führe install.sh mit KI erneut aus.",
        "ai_feature_not_installed": "KI-Komponenten sind nicht installiert. Bitte install.sh mit aktivierten KI-Funktionen erneut ausführen.",
        "ncnn_exit_status": "ncnn-vulkan: exit={code}; Dauer={duration}; Log={log}",
        "ncnn_timeout": "ncnn-vulkan: Timeout.",
        "ncnn_exception": "ncnn-vulkan: Ausnahme: {error}",
        # --- Alpha/Format/Codec-Validierung (copy/keep/original berücksichtigt) ---
        "validate_container_disallows_codec": "Container '{container}' erlaubt den Codec '{codec}' nicht.",
        "validate_codec_not_defined_for_format": "Codec '{codec}' ist für Format '{container}' nicht definiert. Erlaubt: {allowed}",
        "prevalidate_skipped_copy_keep": "Vorprüfung übersprungen (copy/keep ohne bekannten Quell-Codec); fahre vorsichtig fort.",
        "alpha_loss_prefix": "Alpha-Verlust: {reason}",
        "alpha_reason_container_no_alpha": "Container '{container}' unterstützt keine Alpha-Kanäle.",
        "alpha_reason_codec_no_alpha": "Codec '{codec}' kann keinen Alpha-Kanal tragen.",
        "alpha_reason_encoder_no_pf": "Encoder '{encoder}' unterstützt kein alpha-fähiges Pixelformat der Quelle ({pix_fmt}).",
    },
}


def set_lang(lang: str):
    """„en“ oder „de“ einstellen (alles andere fällt auf „en“ zurück)."""
    global _current_lang
    norm = lang.lower().replace("_", "-").split("-")[0]
    _current_lang = (
        norm if norm in MESSAGES else ("de" if norm.startswith("de") else "en")
    )


def get_lang() -> str:
    """Aktive Sprache abfragen („de“ oder „en“)."""
    return _current_lang


def cycle_lang() -> str:
    """Zwischen Deutsch und Englisch umschalten, liefert neue Sprache."""
    set_lang("en" if _current_lang == "de" else "de")
    return _current_lang


def _(key: str) -> str:
    """Übersetzung holen – bei fehlender Übersetzung den Key zurückgeben."""
    return MESSAGES.get(_current_lang, {}).get(key, key)


def tr(value: object | None) -> str:
    """
    Liefert die Übersetzung als String.

    Unterstützt:
      • Dict/Mapping mit Sprach-Keys ({"de": "...", "en": "..."}):
            nimmt _current_lang oder erstes Value (Fallback)
      • andere Werte: via str(...) normalisiert
      • None: -> ""
    """
    if isinstance(value, Mapping):
        m = cast(Mapping[str, object], value)
        chosen: Optional[object] = m.get(_current_lang)
        if chosen is None:
            it: Iterator[object] = iter(m.values())
            try:
                chosen = next(it)
            except StopIteration:
                return ""
        return str(chosen)

    return "" if value is None else str(value)
